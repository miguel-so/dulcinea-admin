<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <link
      rel="shortcut icon"
      href="assets/images/original201-128x128.png"
      type="image/x-icon"
    />
    <meta name="description" content="" />

    <title>Arts</title>
    <link
      rel="stylesheet"
      href="assets/web/assets/mobirise-icons2/mobirise2.css"
    />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css" />
    <link
      rel="stylesheet"
      href="assets/bootstrap/css/bootstrap-reboot.min.css"
    />
    <link rel="stylesheet" href="assets/dropdown/css/style.css" />
    <link rel="stylesheet" href="assets/socicon/css/styles.css" />
    <link rel="stylesheet" href="assets/theme/css/style.css" />
    <link
      rel="preload"
      href="https://fonts.googleapis.com/css?family=Inter+Tight:100,200,300,400,500,600,700,800,900&display=swap"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript
      ><link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Inter+Tight:100,200,300,400,500,600,700,800,900&display=swap"
    /></noscript>
    <link
      rel="preload"
      as="style"
      href="assets/mobirise/css/mbr-additional.css?v=3hG6IF"
    />
    <link
      rel="stylesheet"
      href="assets/mobirise/css/mbr-additional.css?v=3hG6IF"
      type="text/css"
    />
  </head>
  <body>
    <!-- Navbar -->
    <section
      data-bs-version="5.1"
      class="menu menu2 cid-v0b5ifPp6l"
      once="menu"
      id="menu2-1j"
    >
      <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
        <div class="container-fluid">
          <div class="navbar-brand">
            <span class="navbar-logo">
              <a href="index.html">
                <img
                  src="assets/images/grayscale20on20transparent-169x128.png"
                  alt=""
                  style="height: 5.2rem"
                />
              </a>
            </span>
          </div>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-bs-toggle="collapse"
            data-target="#navbarSupportedContent"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarNavAltMarkup"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <div class="hamburger">
              <span></span><span></span><span></span><span></span>
            </div>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul
              class="navbar-nav nav-dropdown nav-right"
              data-app-modern-menu="true"
            >
              <li class="nav-item">
                <a
                  class="nav-link link text-white text-primary display-4"
                  href="index.html"
                  ><strong>Home</strong></a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link link text-white text-primary display-4"
                  href="about.html"
                  ><strong>About Us</strong></a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link link text-white text-primary display-4"
                  href="category.html"
                  ><strong>Categories</strong></a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </section>

    <!-- Hero section -->
    <section
      data-bs-version="5.1"
      class="header01 operationm5 cid-v0ngy112Mp"
      id="header01-1l"
    >
      <div class="container-fluid">
        <div class="row">
          <div class="col-12 col-lg-12">
            <div class="content-wrapper">
              <h1 class="mbr-section-title mbr-fonts-style display-2">
                Loading...
              </h1>
              <p class="mbr-text mbr-fonts-style display-7">
                Please wait while the category loads.
              </p>
              <div class="mbr-section-btn">
                <a class="btn btn-danger display-4" href="#">View more</a>
              </div>
            </div>
          </div>
          <div class="decor-wrapper">
            <div class="decor-wrap decor_1"></div>
            <div class="decor-wrap decor_2"></div>
            <div class="decor-wrap decor_3"></div>
            <div class="decor-wrap decor_4"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Artworks grid -->
    <section
      data-bs-version="5.1"
      class="features4 start cid-v1dWUYYH8T"
      id="features04-2z"
    >
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 content-head"></div>
        </div>
        <div class="row" id="artworks-grid">
          <!-- Dynamic artworks will be injected here -->
        </div>
      </div>
    </section>

    <!-- Footer -->
    <section
      data-bs-version="5.1"
      class="powerm5 footer2 cid-v0bdXklusI"
      once="footers"
      id="footer2-1k"
    >
      <div class="container-fluid">
        <div class="row">
          <div class="col-12 col-md-6 col-lg center">
            <p class="mbr-fonts-style copyright display-4">
              © Copyright 2030 - All Rights Reserved
            </p>
          </div>
          <div class="col-12 col-md-6 col-lg-6 center">
            <div class="row-links">
              <ul class="row-links-soc">
                <li class="row-links-soc-item mbr-fonts-style display-4">
                  <a href="#" class="text-white">Privacy Policy</a>
                </li>
                <li class="row-links-soc-item mbr-fonts-style display-4">
                  <a href="#" class="text-white">Terms of Service</a>
                </li>
                <li class="row-links-soc-item mbr-fonts-style display-4">
                  <a href="#" class="text-white">Cookies Settings</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scripts -->
    <script src="assets/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/smoothscroll/smooth-scroll.js"></script>
    <script src="assets/ytplayer/index.js"></script>
    <script src="assets/dropdown/js/navbar-dropdown.js"></script>
    <script src="assets/theme/js/script.js"></script>
    <script src="assets/js/config.dev.js"></script>

    <script>
      const API_BASE = (window.APP_CONFIG && window.APP_CONFIG.API_URL) || "";
      async function loadCategoryAndArtworks() {
        const params = new URLSearchParams(window.location.search);
        const categoryId = params.get("category");
        if (!categoryId) return;

        try {
          // 1️⃣ Fetch category info
          const categoryRes = await fetch(
            `${API_BASE}/api/categories/${categoryId}`
          );
          const categoryData = await categoryRes.json();
          if (categoryData.success && categoryData.data) {
            const category = categoryData.data;
            const titleEl = document.querySelector(
              "#header01-1l .mbr-section-title"
            );
            const descEl = document.querySelector("#header01-1l .mbr-text");
            const btnEl = document.querySelector(
              "#header01-1l .mbr-section-btn a"
            );

            if (titleEl) titleEl.textContent = category.name;
            if (descEl) descEl.textContent = category.description || "";
            if (btnEl) btnEl.href = `arts.html?category=${category.id}`;
          }

          // 2️⃣ Fetch artworks for this category
          const artworksRes = await fetch(
            `${API_BASE}/api/artworks?category=${categoryId}&all=true`
          );
          const artworksData = await artworksRes.json();
          if (artworksData.artworks && artworksData.artworks.length > 0) {
            const grid = document.getElementById("artworks-grid");
            grid.innerHTML = ""; // clear placeholder

            artworksData.artworks.forEach((art) => {
              const artCard = document.createElement("div");
              artCard.className =
                "item features-image col-12 col-md-6 col-lg-3";
              artCard.innerHTML = `
                <div class="item-wrapper">
                  <div class="item-img">
                    <img src="${
                      `${API_BASE}/artworks/${art.thumbnail}` ||
                      "assets/images/default-art.png"
                    }" alt="${art.title}" />
                  </div>
                  <div class="item-content">
                    <h5 class="item-title mbr-fonts-style display-7"><strong>${
                      art.title
                    }</strong></h5>
                    <p class="mbr-text mbr-fonts-style display-4">${
                      art.description || ""
                    }</p>
                    <div class="mbr-section-btn item-footer">
                      <a href="details.html?id=${
                        art.id
                      }" class="btn item-btn btn-primary display-4">See Details</a>
                    </div>
                    <div class="mbr-section-btn item-footer">
                      <a href="details.html?id=${
                        art.id
                      }" class="btn item-btn btn-warning btnblack display-4">
                        <span class="mobi-mbri mobi-mbri-hearth mbr-iconfont mbr-iconfont-btn"></span>Mark As Favorite
                      </a>
                    </div>
                  </div>
                </div>
              `;
              grid.appendChild(artCard);
            });
          }
        } catch (err) {
          console.error("Error loading category or artworks:", err);
        }
      }

      document.addEventListener("DOMContentLoaded", loadCategoryAndArtworks);
    </script>
  </body>
</html>
